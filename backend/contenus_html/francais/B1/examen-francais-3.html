<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Examen 3 (B1) – Opinions, Comparaison & Argumentation, Passé composé vs
      Imparfait
    </title>
    <link
      rel="stylesheet"
      href="/contenus_css/francais/B1/examen-francais-3.css"
    />
  </head>
  <body>
    <header class="page-header">
      <h1>Examen 3 – Niveau 3 (B1)</h1>
      <p class="subtitle">
        Exprimer ses opinions · Comparer et argumenter · Passé composé vs
        Imparfait
      </p>
    </header>

    <!-- ===== SCORE GLOBAL ===== -->
    <section id="score-global" class="score-wrapper" aria-live="polite">
      <div class="score-card">
        <div class="score-left">
          <div class="score-title">Score total</div>
          <div class="score-subtitle">Somme de toutes les parties</div>
        </div>
        <div class="score-right">
          <span id="score-value">0 / 0</span>
          <button id="btn-recalc" class="btn" title="Recalculer le score">
            Recalculer
          </button>
        </div>
      </div>
    </section>

    <main class="container">
      <!-- ===================== PARTIE 1 ===================== -->
      <section id="partie1" class="exam-section">
        <h2>Partie 1 — Exprimer ses opinions (QCM)</h2>
        <p>Choisissez l’expression la plus naturelle pour chaque phrase.</p>

        <div class="exercise" data-section="1">
          <!-- Q1 -->
          <div class="q-item">
            <p>
              1) ________, la musique classique est plus relaxante que le rock.
            </p>
            <select class="choice" data-correct="Je pense que">
              <option value="">-- Choisissez --</option>
              <option>Je ne suis pas d'accord</option>
              <option>Je pense que</option>
              <option>Ce n'est pas vrai</option>
            </select>
          </div>
          <!-- Q2 -->
          <div class="q-item">
            <p>2) ________ cette décision aura des conséquences importantes.</p>
            <select class="choice" data-correct="Je suis convaincu que">
              <option value="">-- Choisissez --</option>
              <option>Je suis convaincu que</option>
              <option>Je suppose que</option>
              <option>Il me semble</option>
            </select>
          </div>
          <!-- Q3 -->
          <div class="q-item">
            <p>
              3) ________ l’école devrait investir davantage dans l’éducation
              aux médias.
            </p>
            <select class="choice" data-correct="Je crois que">
              <option value="">-- Choisissez --</option>
              <option>Je crois que</option>
              <option>Pas du tout</option>
              <option>Je ne sais pas</option>
            </select>
          </div>
          <!-- Q4 -->
          <div class="q-item">
            <p>4) Pour être honnête, ________ ce projet manque d’ambition.</p>
            <select class="choice" data-correct="je trouve que">
              <option value="">-- Choisissez --</option>
              <option>je déteste</option>
              <option>je trouve que</option>
              <option>il est évident</option>
            </select>
          </div>
          <!-- Q5 -->
          <div class="q-item">
            <p>
              5) ________ cette série n’est pas aussi intéressante que la
              précédente.
            </p>
            <select class="choice" data-correct="À mon avis">
              <option value="">-- Choisissez --</option>
              <option>À mon avis</option>
              <option>Heureusement</option>
              <option>Pour conclure</option>
            </select>
          </div>
          <!-- Q6 -->
          <div class="q-item">
            <p>
              6) ________ ce n’est pas une bonne idée de comparer les deux
              enseignants.
            </p>
            <select class="choice" data-correct="Je ne pense pas que">
              <option value="">-- Choisissez --</option>
              <option>Je ne pense pas que</option>
              <option>Je suis certain que</option>
              <option>Je confirme que</option>
            </select>
          </div>

          <div class="btn-row">
            <button class="btn verifier">Vérifier</button>
            <button class="btn btn-secondary montrer">Voir les réponses</button>
            <button class="btn btn-ghost reinitialiser">Réinitialiser</button>
          </div>
          <div class="resultat"></div>
        </div>
      </section>

      <!-- ===================== PARTIE 2 ===================== -->
      <section id="partie2" class="exam-section">
        <h2>Partie 2 — Comparer et argumenter</h2>

        <h3>2A) Identifier le type de comparaison</h3>
        <p>
          Indiquez s’il s’agit d’un <em>comparatif de supériorité</em>,
          <em>d’infériorité</em>, <em>d’égalité</em> ou d’un
          <em>superlatif</em>.
        </p>

        <div class="exercise" data-section="2a">
          <div class="q-item">
            <p>
              1) La littérature classique est
              <strong>aussi pertinente que</strong> la littérature
              contemporaine.
            </p>
            <select class="choice" data-correct="égalité">
              <option value="">-- Type --</option>
              <option>supériorité</option>
              <option>infériorité</option>
              <option>égalité</option>
              <option>superlatif</option>
            </select>
          </div>
          <div class="q-item">
            <p>
              2) Les énergies renouvelables sont
              <strong>moins coûteuses que</strong> par le passé.
            </p>
            <select class="choice" data-correct="infériorité">
              <option value="">-- Type --</option>
              <option>supériorité</option>
              <option>infériorité</option>
              <option>égalité</option>
              <option>superlatif</option>
            </select>
          </div>
          <div class="q-item">
            <p>
              3) Internet est <strong>le plus grand</strong> changement
              technologique de notre époque.
            </p>
            <select class="choice" data-correct="superlatif">
              <option value="">-- Type --</option>
              <option>supériorité</option>
              <option>infériorité</option>
              <option>égalité</option>
              <option>superlatif</option>
            </select>
          </div>
          <div class="q-item">
            <p>4) Le train est <strong>plus écologique que</strong> l’avion.</p>
            <select class="choice" data-correct="supériorité">
              <option value="">-- Type --</option>
              <option>supériorité</option>
              <option>infériorité</option>
              <option>égalité</option>
              <option>superlatif</option>
            </select>
          </div>
          <div class="q-item">
            <p>
              5) Ce film est <strong>le moins intéressant</strong> de l’année.
            </p>
            <select class="choice" data-correct="superlatif">
              <option value="">-- Type --</option>
              <option>supériorité</option>
              <option>infériorité</option>
              <option>égalité</option>
              <option>superlatif</option>
            </select>
          </div>

          <div class="btn-row">
            <button class="btn verifier">Vérifier</button>
            <button class="btn btn-secondary montrer">Voir les réponses</button>
            <button class="btn btn-ghost reinitialiser">Réinitialiser</button>
          </div>
          <div class="resultat"></div>
        </div>

        <h3>2B) Complétez avec le <em>connecteur logique</em> approprié</h3>
        <p>
          Options possibles (à saisir exactement) :
          <strong
            >car, donc, cependant, en outre, par conséquent, malgré</strong
          >
        </p>

        <div class="exercise" data-section="2b">
          <div class="q-item">
            <p>
              1) Nous devons agir rapidement, _______ la situation se dégrade.
            </p>
            <input class="fill" data-answer="car" placeholder="connecteur" />
          </div>
          <div class="q-item">
            <p>
              2) Les résultats sont excellents ; _______, l’équipe mérite d’être
              félicitée.
            </p>
            <input
              class="fill"
              data-answer="par conséquent"
              placeholder="connecteur"
            />
          </div>
          <div class="q-item">
            <p>
              3) Le projet est intéressant ; _______, il présente quelques
              limites.
            </p>
            <input
              class="fill"
              data-answer="cependant"
              placeholder="connecteur"
            />
          </div>
          <div class="q-item">
            <p>
              4) L’école a investi dans le numérique ; _______, les enseignants
              ont reçu une formation.
            </p>
            <input
              class="fill"
              data-answer="en outre"
              placeholder="connecteur"
            />
          </div>
          <div class="q-item">
            <p>
              5) Le plan a fonctionné, _______ plusieurs obstacles inattendus.
            </p>
            <input class="fill" data-answer="malgré" placeholder="connecteur" />
          </div>
          <div class="q-item">
            <p>6) Les données sont claires, _______ nous pouvons conclure.</p>
            <input class="fill" data-answer="donc" placeholder="connecteur" />
          </div>

          <div class="btn-row">
            <button class="btn verifier">Vérifier</button>
            <button class="btn btn-secondary montrer">Voir les réponses</button>
            <button class="btn btn-ghost reinitialiser">Réinitialiser</button>
          </div>
          <div class="resultat"></div>
        </div>
      </section>

      <!-- ===================== PARTIE 3 ===================== -->
      <section id="partie3" class="exam-section">
        <h2>Partie 3 — Passé composé vs Imparfait (complétion)</h2>
        <p>
          Complétez avec la forme correcte (imparfait ou passé composé).
          Saisissez chaque verbe dans l’input correspondant.
        </p>

        <div class="exercise" data-section="3">
          <div class="q-item">
            <p>
              1) Pendant que je (dormir) ________, quelqu’un (entrer) ________
              dans ma chambre.
            </p>
            <input class="fill" data-answer="dormais" />
            <input class="fill" data-answer="est entré|est entre" />
          </div>
          <div class="q-item">
            <p>
              2) Hier, nous (aller) ________ au cinéma et nous (voir) ________
              un film français.
            </p>
            <input
              class="fill"
              data-answer="sommes allés|sommes allees|sommes alle|sommes allé|sommes allé(e)s"
            />
            <input class="fill" data-answer="avons vu" />
          </div>
          <div class="q-item">
            <p>
              3) Quand j’(être) ________ petit, je (jouer) ________ souvent au
              football.
            </p>
            <input class="fill" data-answer="étais|etais" />
            <input class="fill" data-answer="jouais" />
          </div>
          <div class="q-item">
            <p>
              4) Marie (lire) ________ un livre quand son téléphone (sonner)
              ________.
            </p>
            <input class="fill" data-answer="lisait" />
            <input class="fill" data-answer="a sonné|a sonne" />
          </div>
          <div class="q-item">
            <p>
              5) L’an dernier, je (partir) ________ en Espagne et j’(rencontrer)
              ________ des gens formidables.
            </p>
            <input
              class="fill"
              data-answer="suis parti|suis partie|suis parti(e)"
            />
            <input class="fill" data-answer="ai rencontré|ai rencontre" />
          </div>
          <div class="q-item">
            <p>
              6) Il (faire) ________ beau et les oiseaux (chanter) ________.
            </p>
            <input class="fill" data-answer="faisait" />
            <input class="fill" data-answer="chantaient" />
          </div>
          <div class="q-item">
            <p>
              7) Dès qu’elle (apprendre) ________ la nouvelle, elle (appeler)
              ________ son ami.
            </p>
            <input class="fill" data-answer="a appris|a appris" />
            <input class="fill" data-answer="a appelé|a appele" />
          </div>
          <div class="q-item">
            <p>
              8) Je (chercher) ________ mes clés quand je les (trouver) ________
              dans ma poche.
            </p>
            <input class="fill" data-answer="cherchais" />
            <input
              class="fill"
              data-answer="ai trouvées|ai trouvees|ai trouvé|ai trouve"
            />
          </div>

          <div class="btn-row">
            <button class="btn verifier">Vérifier</button>
            <button class="btn btn-secondary montrer">Voir les réponses</button>
            <button class="btn btn-ghost reinitialiser">Réinitialiser</button>
          </div>
          <div class="resultat"></div>
        </div>
      </section>

      <!-- ===================== PARTIE 4 ===================== -->
      <section id="partie4" class="exam-section">
        <h2>Partie 4 — Production écrite (150–200 mots)</h2>
        <p>
          Rédigez un paragraphe argumentatif sur l’un de ces sujets (150–200
          mots) :
        </p>
        <ul class="topics">
          <li>
            Les réseaux sociaux ont-ils un impact positif ou négatif sur les
            relations humaines ?
          </li>
          <li>
            Le télétravail représente-t-il l’avenir du monde professionnel ?
          </li>
          <li>
            Faut-il interdire l’usage des téléphones portables à l’école ?
          </li>
        </ul>

        <div class="exercise" id="prod" data-section="4">
          <textarea
            id="prod-texte"
            rows="10"
            placeholder="Écrivez votre texte ici (150–200 mots)..."
          ></textarea>

          <div class="btn-row">
            <button class="btn verifier-texte">Évaluer mon texte</button>
            <button class="btn btn-ghost reinitialiser">Effacer</button>
          </div>

          <div class="criteres">
            <h3>Barème automatique (6 points)</h3>
            <ol>
              <li>Longueur ≥ 150 mots (1 pt)</li>
              <li>
                Thèse explicite (ex. « Je pense que / À mon avis ») (1 pt)
              </li>
              <li>
                Connecteurs logiques (≥3 : en effet, de plus, cependant, donc,
                par conséquent, etc.) (1 pt)
              </li>
              <li>
                Arguments diversifiés (marqueurs: d’abord, ensuite, en outre,
                par ailleurs…) (1 pt)
              </li>
              <li>
                Exemple concret (ex. « par exemple », « une étude », « comme »)
                (1 pt)
              </li>
              <li>
                Comparaison/nuance (structures plus/moins/aussi… que, le
                plus/moins…) (1 pt)
              </li>
            </ol>
          </div>

          <div class="resultat"></div>
        </div>
      </section>
    </main>

    <footer class="page-footer">
      <p>© 2025 - Examen de français (B1)</p>
    </footer>

    <script>
      // ========= Utils =========
      const norm = (s) =>
        (s || "")
          .toString()
          .trim()
          .toLowerCase()
          .normalize("NFD")
          .replace(/[\u0300-\u036f]/g, "");

      // ========= Vérification générique (inputs .fill, selects .choice) =========
      function verifySection(sectionEl) {
        const res = sectionEl.querySelector(".resultat");
        let total = 0,
          ok = 0;

        // Fills
        sectionEl.querySelectorAll("input.fill").forEach((inp) => {
          const ans = inp.dataset.answer;
          if (!ans) return;
          total++;
          const alts = ans.split("|").map((a) => norm(a));
          if (alts.includes(norm(inp.value))) {
            ok++;
            inp.classList.add("correct");
            inp.classList.remove("incorrect");
          } else {
            inp.classList.add("incorrect");
            inp.classList.remove("correct");
          }
        });

        // Selects
        sectionEl.querySelectorAll("select.choice").forEach((sel) => {
          const ans = sel.dataset.correct;
          if (!ans) return;
          total++;
          if (norm(sel.value) === norm(ans)) {
            ok++;
            sel.classList.add("correct");
            sel.classList.remove("incorrect");
          } else {
            sel.classList.add("incorrect");
            sel.classList.remove("correct");
          }
        });

        // Radios (groupe = name). Pour ajouter des radios, donnez-leur class="radio" et data-correct="true" sur la bonne option.
        const radios = Array.from(sectionEl.querySelectorAll("input.radio"));
        const byName = new Map();
        radios.forEach((r) => {
          if (!byName.has(r.name)) byName.set(r.name, []);
          byName.get(r.name).push(r);
        });
        byName.forEach((group, name) => {
          total++;
          const checked = group.find((r) => r.checked);
          const good = group.find((r) => r.dataset.correct === "true");
          if (checked && good && checked === good) {
            ok++;
            group.forEach((r) => r.parentElement.classList.add("r-correct"));
          } else {
            group.forEach((r) => r.parentElement.classList.add("r-incorrect"));
          }
        });

        if (res) {
          res.style.display = "block";
          res.textContent = `Score : ${ok}/${total}`;
          res.className =
            "resultat " + (ok === total ? "correct" : "incorrect");
        }
        updateGlobalScore();
      }

      function showAnswers(sectionEl) {
        // inputs
        sectionEl.querySelectorAll("input.fill").forEach((inp) => {
          if (inp.dataset.answer) {
            inp.value = inp.dataset.answer.split("|")[0];
            inp.classList.add("correct");
            inp.classList.remove("incorrect");
          }
        });
        // selects
        sectionEl.querySelectorAll("select.choice").forEach((sel) => {
          const ans = sel.dataset.correct || "";
          Array.from(sel.options).forEach((opt, i) => {
            if (norm(opt.value) === norm(ans)) {
              sel.selectedIndex = i;
            }
          });
          sel.classList.add("correct");
          sel.classList.remove("incorrect");
        });
        // radios
        sectionEl
          .querySelectorAll("input.radio[data-correct='true']")
          .forEach((r) => {
            r.checked = true;
          });
        const res = sectionEl.querySelector(".resultat");
        if (res) {
          res.style.display = "block";
          res.textContent = "Voici les réponses correctes.";
          res.className = "resultat correct";
        }
        updateGlobalScore();
      }

      function resetSection(sectionEl) {
        sectionEl.querySelectorAll("input.fill").forEach((inp) => {
          inp.value = "";
          inp.classList.remove("correct", "incorrect");
        });
        sectionEl.querySelectorAll("select.choice").forEach((sel) => {
          sel.selectedIndex = 0;
          sel.classList.remove("correct", "incorrect");
        });
        sectionEl.querySelectorAll("input.radio").forEach((r) => {
          r.checked = false;
          r.parentElement.classList.remove("r-correct", "r-incorrect");
        });
        const res = sectionEl.querySelector(".resultat");
        if (res) {
          res.style.display = "none";
          res.textContent = "";
          res.className = "resultat";
        }
        updateGlobalScore();
      }

      // ========= Score global =========
      function countAutoItems() {
        let total = 0,
          ok = 0;

        document.querySelectorAll("input.fill").forEach((inp) => {
          const ans = inp.dataset.answer;
          if (!ans) return;
          total++;
          const alts = ans.split("|").map((a) => norm(a));
          if (alts.includes(norm(inp.value))) ok++;
        });

        document.querySelectorAll("select.choice").forEach((sel) => {
          const ans = sel.dataset.correct;
          if (!ans) return;
          total++;
          if (norm(sel.value) === norm(ans)) ok++;
        });

        // radios group
        const radios = Array.from(document.querySelectorAll("input.radio"));
        const names = [...new Set(radios.map((r) => r.name))];
        names.forEach((n) => {
          const group = radios.filter((r) => r.name === n);
          if (group.length) {
            total++;
            const checked = group.find((r) => r.checked);
            const good = group.find((r) => r.dataset.correct === "true");
            if (checked && checked === good) ok++;
          }
        });

        return { total, ok };
      }

      // Barème Partie 4 (6 pts)
      const LISTS = {
        these: [
          "je pense que",
          "je crois que",
          "à mon avis",
          "a mon avis",
          "je suis convaincu",
          "je suis convaincue",
        ],
        connecteurs: [
          "en effet",
          "de plus",
          "cependant",
          "toutefois",
          "néanmoins",
          "en outre",
          "donc",
          "par conséquent",
          "par consequent",
          "c'est pourquoi",
          "car",
          "puisque",
        ],
        arguments: [
          "d'abord",
          "d abord",
          "tout d'abord",
          "tout d abord",
          "ensuite",
          "par ailleurs",
          "en outre",
          "de plus",
        ],
        exemple: ["par exemple", "par ex", "comme", "une étude", "une etude"],
        comparaison: ["plus", "moins", "aussi", "le plus", "le moins"],
      };

      function scoreProduction() {
        const ta = document.getElementById("prod-texte");
        const raw = (ta?.value || "").trim();
        const T = norm(raw);
        const words = raw.split(/\s+/).filter(Boolean).length;

        const lenOK = words >= 150;
        const theseOK = LISTS.these.some((k) => T.includes(k));
        const connOK =
          LISTS.connecteurs.filter((k) => T.includes(k)).length >= 3;
        const argOK = LISTS.arguments.filter((k) => T.includes(k)).length >= 2;
        const exOK = LISTS.exemple.some((k) => T.includes(k));
        // compter au moins 2 occurrences comparatives/nuance
        const cmpCount =
          (T.match(/\b(plus|moins|aussi)\b/g) || []).length +
          (T.match(/\b(le|la|les)\s+plus\b/g) || []).length +
          (T.match(/\b(le|la|les)\s+moins\b/g) || []).length;
        const cmpOK = cmpCount >= 2;

        const checks = [lenOK, theseOK, connOK, argOK, exOK, cmpOK];
        const score = checks.filter(Boolean).length;
        return { score, total: 6, words, checks };
      }

      function updateGlobalScore() {
        const auto = countAutoItems();
        const prod = scoreProduction();
        const ok = auto.ok + prod.score;
        const total = auto.total + prod.total;

        const label = document.getElementById("score-value");
        if (label) {
          label.textContent = `${ok} / ${total}`;
          label.style.background =
            ok === total ? "var(--success-100)" : "var(--primary-100)";
        }
      }

      // ========= Wiring =========
      document.querySelectorAll(".exercise").forEach((sec) => {
        const btnV = sec.querySelector(".verifier");
        const btnM = sec.querySelector(".montrer");
        const btnR = sec.querySelector(".reinitialiser");

        if (btnV) btnV.addEventListener("click", () => verifySection(sec));
        if (btnM) btnM.addEventListener("click", () => showAnswers(sec));
        if (btnR) btnR.addEventListener("click", () => resetSection(sec));
      });

      // Partie 4
      document
        .querySelector("#partie4 .verifier-texte")
        ?.addEventListener("click", () => {
          const out = document.querySelector("#partie4 .resultat");
          const { score, total, words } = scoreProduction();
          out.style.display = "block";
          if (score === total) {
            out.className = "resultat correct";
            out.innerHTML = `✅ Texte conforme. Score partie 4 : <strong>${score}/${total}</strong> (≈ ${words} mots).`;
          } else {
            out.className = "resultat incorrect";
            out.innerHTML = `⛔ Critères manquants. Score partie 4 : <strong>${score}/${total}</strong> (≈ ${words} mots). Voir le barème ci-dessus.`;
          }
          updateGlobalScore();
        });

      document
        .querySelector("#partie4 .reinitialiser")
        ?.addEventListener("click", () => {
          const ta = document.getElementById("prod-texte");
          const out = document.querySelector("#partie4 .resultat");
          if (ta) ta.value = "";
          if (out) {
            out.style.display = "none";
            out.textContent = "";
            out.className = "resultat";
          }
          updateGlobalScore();
        });

      document
        .getElementById("btn-recalc")
        ?.addEventListener("click", updateGlobalScore);

      // init
      updateGlobalScore();
    </script>
  </body>
</html>
